jQuery(function(){jQuery(document).foundation(),jQuery(".slick").slick({}),jQuery(".slick-4").slick({slidesToShow:4,slidesToScroll:1}),jQuery(".warranty img").on("click",function(){console.log("click"),jQuery(this).prev(".tooltip").toggleClass("hide")}),jQuery(".warranty .tooltip").on("click",function(){jQuery(this).toggleClass("hide")})}),jQuery(function(){function e(e,t,r,o){var i=this;this.title=e,this.value=t,this.price=r,this.price2=o,this.found=!0,this.createFromSelect=function(e){var t="select[name="+e+"]";return this.found=!!jQuery(t).length,i.value=jQuery(t).val(),i.price=parseFloat(jQuery(t+" option:selected").attr("data-amount")),i.price2=parseFloat(jQuery(t+" option:selected").attr("data-amount2"))||0,i},this.createFromInput=function(e){return this.found=!!jQuery(e).length,i.value=jQuery(e).val(),i.price=parseFloat(jQuery(e).attr("data-amount")),i.price2=parseFloat(jQuery(e).attr("data-amount2"))||0,i},this.createFromRadio=function(e){var t="input[name="+e+"]:checked";return this.found=!!jQuery(t).length,i.value=jQuery(t).val(),i.price=parseFloat(jQuery(t).attr("data-amount")),i.price2=parseFloat(jQuery(t).attr("data-amount26"))||0,i}}function t(e){this.title=jQuery(e).attr("data-title"),this.price=jQuery(e).attr("data-amount"),this.square_feet=jQuery(e).val(),this.getTotal=function(){return this.price*this.square_feet}}var r={current_step:1,project_type:0,details_section:"",base_price:0,square_feet:0,modifiers:[],removal:[],init:function(){jQuery(".species input[type=radio]").on("change",function(){var e=jQuery(this).attr("id");jQuery(".species label.active").removeClass("active"),jQuery("label[for="+e+"]").addClass("active")}),jQuery('select[name^="removal"]').on("change",function(){console.log("changed removal value");var e=jQuery(this).val(),t=jQuery(this).parent("label").next(".yes"),r=jQuery(this).parent("label").next(".yes").next(".no");"yes"==e?r.is(":visible")?r.slideToggle(function(){t.slideToggle()}):t.slideToggle():t.is(":visible")?t.slideToggle(function(){r.slideToggle()}):r.slideToggle()}),jQuery("select[name=ownB]").on("change",function(){var e=jQuery(this).parent("label").next("br").next(".no");e.slideToggle()}),jQuery("a.ready").on("click",function(e){var t=jQuery(this).siblings(".submit");return jQuery(this).parent("div").next("form").slideToggle(function(){t.fadeToggle()}),e.preventDefault(),e.defaultPrevented=!0,!1})},addModifer:function(e){e.found&&r.modifiers.push(e)},setActiveStep:function(e){jQuery(".steps .active").removeClass("active"),jQuery(".steps > div:nth-child("+e+") .step").addClass("active")},processStep1:function(){r.project_type=jQuery("input[name=project]:checked").val(),r.details_section=jQuery("#project"+r.project_type),console.log("project type is "+r.project_type),jQuery("#projectType").is(":visible")?jQuery("#projectType").slideToggle(function(){r.details_section.slideToggle()}):r.details_section.slideToggle()},processStep2:function(){if(r.modifiers=[],r.removal=[],"D"!=this.project_type?(r.base_price=parseFloat(jQuery("input[name=Base"+this.project_type+"]").val()),r.square_feet=jQuery("#square"+this.project_type).val()):(r.base_price=[parseFloat(jQuery("input[name=BaseA]").val()),parseFloat(jQuery("input[name=BaseC]").val())],r.square_feet=[jQuery("#squareInstallation"+this.project_type).val(),jQuery("#squareRefinish"+this.project_type).val()]),"A"==this.project_type)r.addModifer(new e("Wood Species").createFromRadio("species"+this.project_type)),r.addModifer(new e("Plank Width").createFromSelect("width"+this.project_type)),r.addModifer(new e("Stain").createFromRadio("stain"+this.project_type)),r.addModifer(new e("Finish").createFromRadio("finish"+this.project_type)),r.addModifer(new e("Baseboard removal and re-attach").createFromRadio("baseboard"+this.project_type));else if("B"==this.project_type){var o=new e("Own Materials").createFromSelect("ownB");r.modifiers.push(o),"yes"===o.value?(console.log("user owns their own materials"),r.addModifer(new e("Needs to be nailed to subfloor").createFromSelect("nailed"+this.project_type))):(console.log("user does not own their own materials"),r.addModifer(new e("Wood Species").createFromRadio("species"+this.project_type)),r.addModifer(new e("Wood Type").createFromSelect("solid"+this.project_type)),r.addModifer(new e("Plank Width").createFromSelect("width"+this.project_type)),r.addModifer(new e("Stain").createFromRadio("stain"+this.project_type)),r.addModifer(new e("Finish").createFromRadio("finish"+this.project_type)),r.addModifer(new e("Grade Level").createFromSelect("grade"+this.project_type)),r.addModifer(new e("Nailed").createFromSelect("nailed"+this.project_type))),console.log(r)}else"C"==this.project_type&&(r.addModifer(new e("Wood Species").createFromRadio("species"+this.project_type)),r.addModifer(new e("Stain").createFromRadio("stain"+this.project_type)),r.addModifer(new e("Finish").createFromRadio("finish"+this.project_type)));return"D"==this.project_type?(r.addModifer(new e("Wood Species").createFromRadio("species"+this.project_type)),r.addModifer(new e("Plank Width").createFromSelect("width"+this.project_type)),r.addModifer(new e("Stain").createFromRadio("stain"+this.project_type)),r.addModifer(new e("Finish").createFromRadio("finish"+this.project_type)),void r.addModifer(new e("Baseboard removal and re-attach").createFromRadio("baseboard"+this.project_type))):(console.log("need to remove existing flooring?"+jQuery("select[name=removal"+this.project_type+"] option:selected").val()),void("yes"==jQuery("select[name=removal"+this.project_type+"] option:selected").val()&&jQuery("input[name=removal"+this.project_type+"Rooms]").each(function(){jQuery(this).val()>0&&r.removal.push(new t(jQuery(this)))})))},processStep3:function(){jQuery("input[name=estimate]").val(r.getJson()),jQuery("form.estimate-form-submit").submit()},getTotal:function(){if("D"!=r.project_type){for(var e=this.base_price,t=0;t<this.modifiers.length;t++)e+=this.modifiers[t].price;var o=e*this.square_feet,i=0;if(this.removal.length)for(var a=0;a<this.removal.length;a++){var s=this.removal[a].getTotal();i+=s,console.log(this.removal[a].square_feet+" sq/ft of "+this.removal[a].title+" will cost "+s)}var n=o+i;return console.log("price per square foot is "+e),console.log("total price for installation is $"+o),console.log("cost for removal is "+i),console.log("total estimate is $"+n),n}for(var l=this.base_price[0],c=this.base_price[1],t=0;t<this.modifiers.length;t++)l+=this.modifiers[t].price,c+=this.modifiers[t].price2;var o=l*this.square_feet[0],d=c*this.square_feet[1],i=0;if(this.removal.length)for(var a=0;a<this.removal.length;a++){var s=this.removal[a].getTotal();i+=s,console.log(this.removal[a].square_feet+" sq/ft of "+this.removal[a].title+" will cost "+s)}var n=o+d+i;return console.log("price per square foot is "+(l+c)),console.log("total price for installation is $"+o),console.log("total price for refinishing is $"+d),console.log("cost for removal is "+i),console.log("total estimate is $"+n),console.log(r),n},getService:function(){switch(this.project_type){case"A":return"Hardwood Floor Installation";case"B":return"Pre Finished or Engineered Hardwood Floor Installation";case"C":return"Refinish Existing Hardwood Flooring";case"D":return"Add on New Hardwood Flooring and Refinish Existing Hardwood Flooring"}},getJson:function(){for(var e={service:this.getService(),price:this.getTotal(),square_feet:this.square_feet,modifiers:[],removal:[]},t=0;t<this.modifiers.length;t++)e.modifiers.push({title:this.modifiers[t].title,value:this.modifiers[t].title});if(this.removal.length)for(var r=0;r<this.removal.length;r++)e.removal.push({title:this.removal[r].title,value:this.removal[r].square_feet});return JSON.stringify(e)},showResults:function(){for(var e="<h2><span class='primary-text'>you selected:</span> "+r.getService()+"</h2>",t="<tr><th>PRICE ESTIMATE</th><th>$"+r.getTotal()+"</th></tr>",o="",i=0;i<r.modifiers.length;i++)o+="<tr><td>"+r.modifiers[i].title+"</td><td>"+r.modifiers[i].value+"</td></tr>";o+="<tr><td>Removal of Existing Floor Covering</td><td>",o+=r.removal.length?r.removal.map(function(e){return e.title}).join(", "):"No",o+="</td></tr>",o+="<tr><td>Sq Footage:</td><td>"+r.square_feet+"</td></tr>";var a=e+"<table><tbody>"+t+o+"</tbody></table>";jQuery(".estimate-form:visible").slideToggle(function(){jQuery(".estimate-details .quote").html(a),jQuery(".estimate-details").slideToggle()})}};r.init(),jQuery(".estimate-form").on("submit",function(e){return e.preventDefault(),e.defaultPrevented=!0,!1}),jQuery(".estimate-form").on("formvalid.zf.abide",function(e){return console.log("hit next. processing step "+r.current_step),1===r.current_step?(r.processStep1(),r.current_step=2,r.setActiveStep(2)):2===r.current_step?(r.processStep2(),r.showResults(),r.current_step=3,r.setActiveStep(3)):3===r.current_step&&r.processStep3(),e.preventDefault(),e.defaultPrevented=!0,!1}),jQuery(".estimate-form .button.prev").on("click",function(e){return 3===r.current_step?jQuery(".estimate-details:visible").slideToggle(function(){r.processStep1(),r.current_step=2,r.setActiveStep(2)}):2===r.current_step&&jQuery(".estimate-form:visible").slideToggle(function(){jQuery("#projectType").slideToggle(),r.current_step=1}),e.preventDefault(),e.defaultPrevented=!0,!1}),jQuery(".reveal .calculate").on("click",function(){var e=jQuery(jQuery(this).attr("data-field")),t=parseInt(jQuery("input[name=calculateWidthFeet"+r.project_type+"]").val()),o=parseInt(jQuery("input[name=calculateWidthInches"+r.project_type+"]").val()),i=parseInt(jQuery("input[name=calculateLengthFeet"+r.project_type+"]").val()),a=parseInt(jQuery("input[name=calculateLengthInches"+r.project_type+"]").val()),s=12*t+o,n=12*i+a,l=Math.floor(s*n/144),c=s*n/144%12;console.log("length "+s+" width "+n),console.log("area is "+l+" feet and "+c+" square inches"),e.val(Math.round(s*n/144)),jQuery("#calculatorModal"+r.project_type).foundation("close")})});